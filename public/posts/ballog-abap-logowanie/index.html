<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Ballog czyli logowanie danych w ABAPie | Pawel Wiejkut</title>
<meta name="keywords" content="ABAP, ABAP od podstaw" />
<meta name="description" content="Każdy język programowania posiada możliwość zapisania informacji technicznej, czy też zdarzenia które może być pomocna później na przykład podczas sprawdzenia poprawności działania napisanego programu. W wielu językach czynność ta sprowadza się często do napisania jednej linijki kodu, np:
console.log(&#34;Oh, coś poszło nie tak!&#34;); W ABAPie sytuacja jest trochę bardziej skomplikowana. Zacznijmy może od napisania prostego programu, który będzie opierać się na stworzonych przez nas wcześniej obiektach DDICowych. Żeby nauczyć się czegoś nowego polecam razem ze mną wykonać wszystko w eclipse, oczywiście równie dobrze każdy krok będzie działać też bezpośrednio w SAP GUI.">
<meta name="author" content="">
<link rel="canonical" href="https://pawelwiejkut.dev/posts/ballog-abap-logowanie/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.ac4bcbb73df0e6ab1ca259fb2803b8b2c1dd02cbb6ad0840029b799f5c5360ba.css" integrity="sha256-rEvLtz3w5qscoln7KAO4ssHdAsu2rQhAApt5n1xTYLo=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js" integrity="sha256-uVus3DnjejMqn4g7Hni&#43;Srwf3KK8HyZB9V4809q9TWE="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://pawelwiejkut.dev/profile.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://pawelwiejkut.dev/profile.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://pawelwiejkut.dev/profile.png">
<link rel="apple-touch-icon" href="https://pawelwiejkut.dev/profile.png">
<link rel="mask-icon" href="https://pawelwiejkut.dev/profile.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.105.0">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>


<script async src="https://www.googletagmanager.com/gtag/js?id=G-3R9CLWGY39"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-3R9CLWGY39', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="Ballog czyli logowanie danych w ABAPie" />
<meta property="og:description" content="Każdy język programowania posiada możliwość zapisania informacji technicznej, czy też zdarzenia które może być pomocna później na przykład podczas sprawdzenia poprawności działania napisanego programu. W wielu językach czynność ta sprowadza się często do napisania jednej linijki kodu, np:
console.log(&#34;Oh, coś poszło nie tak!&#34;); W ABAPie sytuacja jest trochę bardziej skomplikowana. Zacznijmy może od napisania prostego programu, który będzie opierać się na stworzonych przez nas wcześniej obiektach DDICowych. Żeby nauczyć się czegoś nowego polecam razem ze mną wykonać wszystko w eclipse, oczywiście równie dobrze każdy krok będzie działać też bezpośrednio w SAP GUI." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://pawelwiejkut.dev/posts/ballog-abap-logowanie/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-04-14T17:01:40&#43;01:00" />
<meta property="article:modified_time" content="2019-04-14T17:01:40&#43;01:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Ballog czyli logowanie danych w ABAPie"/>
<meta name="twitter:description" content="Każdy język programowania posiada możliwość zapisania informacji technicznej, czy też zdarzenia które może być pomocna później na przykład podczas sprawdzenia poprawności działania napisanego programu. W wielu językach czynność ta sprowadza się często do napisania jednej linijki kodu, np:
console.log(&#34;Oh, coś poszło nie tak!&#34;); W ABAPie sytuacja jest trochę bardziej skomplikowana. Zacznijmy może od napisania prostego programu, który będzie opierać się na stworzonych przez nas wcześniej obiektach DDICowych. Żeby nauczyć się czegoś nowego polecam razem ze mną wykonać wszystko w eclipse, oczywiście równie dobrze każdy krok będzie działać też bezpośrednio w SAP GUI."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://pawelwiejkut.dev/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Ballog czyli logowanie danych w ABAPie",
      "item": "https://pawelwiejkut.dev/posts/ballog-abap-logowanie/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Ballog czyli logowanie danych w ABAPie",
  "name": "Ballog czyli logowanie danych w ABAPie",
  "description": "Każdy język programowania posiada możliwość zapisania informacji technicznej, czy też zdarzenia które może być pomocna później na przykład podczas sprawdzenia poprawności działania napisanego programu. W wielu językach czynność ta sprowadza się często do napisania jednej linijki kodu, np:\nconsole.log(\u0026#34;Oh, coś poszło nie tak!\u0026#34;); W ABAPie sytuacja jest trochę bardziej skomplikowana. Zacznijmy może od napisania prostego programu, który będzie opierać się na stworzonych przez nas wcześniej obiektach DDICowych. Żeby nauczyć się czegoś nowego polecam razem ze mną wykonać wszystko w eclipse, oczywiście równie dobrze każdy krok będzie działać też bezpośrednio w SAP GUI.",
  "keywords": [
    "ABAP", "ABAP od podstaw"
  ],
  "articleBody": "Każdy język programowania posiada możliwość zapisania informacji technicznej, czy też zdarzenia które może być pomocna później na przykład podczas sprawdzenia poprawności działania napisanego programu. W wielu językach czynność ta sprowadza się często do napisania jednej linijki kodu, np:\nconsole.log(\"Oh, coś poszło nie tak!\"); W ABAPie sytuacja jest trochę bardziej skomplikowana. Zacznijmy może od napisania prostego programu, który będzie opierać się na stworzonych przez nas wcześniej obiektach DDICowych. Żeby nauczyć się czegoś nowego polecam razem ze mną wykonać wszystko w eclipse, oczywiście równie dobrze każdy krok będzie działać też bezpośrednio w SAP GUI.\nUwaga, w tym artykule przedstawiam tylko jeden sposób na obsługę balloga. Nie omawiam tu również szczegółowo wiadomości które wyświetlamy na ekranie użytkownika.\nJeżeli szukasz kompletnego kursu online abap od podstaw – zapraszam Cię do zapoznania się z ofertą: https://saponit.pl/kurs-abap/\nTworzymy program Odpalmy sobie eclipse, kliknijmy prawym przyciskiem na pakiecie $TMP w naszym projekcie i wybierzmy New-\u003eOther ABAP Repository Object Wpisujemy „program” i wybieramy ABAP program Wypełniamy konieczne pola Programujemy sobie teraz raport który będzie umożliwiał wpisanie nam jednego rekordu do naszej tabelki: REPORT zemp_add. PARAMETERS: pa_id TYPE char3, pa_nam TYPE zemp_name, pa_lnm TYPE zemp_name. END-OF-SELECTION. DATA: ls_employees TYPE zstr_employees. ls_employees-id = pa_id. ls_employees-name = pa_nam. ls_employees-last_name = pa_lnm. insert zemployees from ls_employees. Write: | { pa_nam } was successfully added into table| . Uzupełnijmy sobie jeszcze text elementy, żeby nazwy naszych parametrów były wyświetlane poprawnie, w tym celu kliknijmy prawym przyciskiem i wbierzmy Open Others-\u003e Text Elements Debbugujemy Zapisujemy,aktywujemy i uruchamiamy program z wybranymi parametrami np. poprzez F8 Sprawdźmy teraz zawartość naszej tabeli, żeby tego dokonać, musimy rozwinąć naszą paczkę $TMP, i poszukać tabeli w katalogu „Database Tables”. Następnie klikamy na tabeli prawym przyciskiem myszy i wybieramy „Open With”-\u003e”Data Preview”. Finalnie w tabeli powinien pojawić się nowy rekord Niestety jeżeli jeszcze raz uruchomimy program z tymi samymi parametrami to znów dostaniemy komunikat o poprawnym wprowadzeniu rekordu mimo tego że nic się nie zmieni i w tabeli będziemy mieć wciąż tylko jeden rekord. Dlaczego tak się stało ? Ustawmy breake-point poprzez dwukrotne kliknięcie w pole obok ostatniej lini. Spowodowuje to wyświetlenie w tym miejscu niebieskiej kropki. Teraz kiedy uruchomimy raport znów z tymi samymi parametrami co na początku zobaczymy że wartość sy-subrc jest równa 4, ale co to właściwie oznacza ? Wartość sy-subrc jest aktualizowana każdorazowo po wykonaniu niektórych instrukcji w ABAPie . Aby sprawdzić co oznacza sy-subrc 4 w przypadku insert, pozwólmy zakończyć się programowi poprzez naciśnięcie F8 i wróćmy do perspektywy abapowej naszego raportu. Najedźmy teraz kursorem na insert i kliknijmy F1, następnie wybierzmy INSERT dbtab Po zescrolowniu na dół zobaczymy informacje o sy-subrc mówiącą że nasz wiersz nie jest unikatowy, ale jak to możliwe ? Po porostu nasza tabela którą stworzyliśmy w DDICu podczas ostatniej lekcji ma w kluczu jedno pole: ID i ta wartość musi być unikatowa. Oczywiście po niepoprawnym sy-subrc możemy jedynie wyświetlić użytkownikowi informacje że taki wpis już istnieje, jednak nam zależy również na zalogowaniu tej informacji gdzieś na stałe. Tworzymy obiekt ballogowy Przejdżmy zatem do transakcji slg0 i kliknijmy na „New Entries” Wypełniamy nazwę obiektu Zapisujemy i dodajemy nasz wpis do transportu Zaznaczamy stworzony obiekt i klikamy na Sub-objects Klikamy znowu na „New Entries” Wypełniamy sub-obiekt i zapisujemy Używamy balloga w raporcie Zmieńmy teraz nasz program tak aby wyglądał następująco REPORT zemp_add. PARAMETERS: pa_id TYPE char3, pa_nam TYPE zemp_name, pa_lnm TYPE zemp_name. END-OF-SELECTION. DATA: ls_employees TYPE zstr_employees. ls_employees-id = pa_id. ls_employees-name = pa_nam. ls_employees-last_name = pa_lnm. INSERT zemployees FROM ls_employees. IF sy-subrc = 0. MESSAGE |{ pa_nam } was successfully added into table| TYPE 'S'. ELSEIF sy-subrc = 4. DATA: ls_header TYPE bal_s_log, lt_handler TYPE bal_t_logh, lv_handle TYPE balloghndl, lv_text TYPE c LENGTH 50. ls_header-object = 'ZB_EMP'. ls_header-subobject = 'ZB_EMP_ADD'. ls_header-extnumber = 'Employees insert report log'. \"tworzymy obiekt ballogowy CALL FUNCTION 'BAL_LOG_CREATE' EXPORTING i_s_log = ls_header IMPORTING e_log_handle = lv_handle. \"dodajemy wiadomość o niepowodzeniu naszego programu lv_text = |Entry with key { pa_id } already exists|. CALL FUNCTION 'BAL_LOG_MSG_ADD_FREE_TEXT' EXPORTING i_log_handle = lv_handle i_msgty = 'E' i_text = lv_text. APPEND lv_handle TO lt_handler. \"zapisujemy informacje o niepowodzeniu w ballogu CALL FUNCTION 'BAL_DB_SAVE' EXPORTING i_t_log_handle = lt_handler. MESSAGE: lv_text TYPE 'E'. ENDIF. Uruchamiamy nasz program znów z poprzednimi wartościami. Tym razem powinnismy dostać message z informacją o błędzie Przejdźmy teraz do transakcji slg1 i wypełnijmy nazwę naszego obiektu. Warto też zwrócić uwagę na przedział czasowy w jakim wyświetlają się nasze logi, czasami jeżeli nie wyłączamy całkowicie naszej wirtualnej maszyny to data i godzina mogą się różnić od tych ustawionych na naszym systemie. Po wprowadzeniu wartości uruchamiamy program. Finalnie powinniśmy zobaczyć jeden błąd w górnej części programu i po kliknięciu na niego pojawią się nam szczegóły. Od teraz nasze błędne wprowadzenia są już logowane i można do nich wrócić. To już wszystko w tym artykule poświęconym ballogowi. Od teraz znasz już podstawowy sposób na zalogowanie informacji.\n",
  "wordCount" : "792",
  "inLanguage": "en",
  "datePublished": "2019-04-14T17:01:40+01:00",
  "dateModified": "2019-04-14T17:01:40+01:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://pawelwiejkut.dev/posts/ballog-abap-logowanie/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Pawel Wiejkut",
    "logo": {
      "@type": "ImageObject",
      "url": "https://pawelwiejkut.dev/profile.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://pawelwiejkut.dev/" accesskey="h" title="Pawel Wiejkut (Alt + H)">Pawel Wiejkut</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://pawelwiejkut.dev/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span><i class='fa fa-heart'></i>Search</span>
                </a>
            </li>
            <li>
                <a href="https://pawelwiejkut.dev/about-me/" title="About me">
                    <span>About me</span>
                </a>
            </li>
            <li>
                <a href="https://pawelwiejkut.dev/bw/" title="BW">
                    <span>BW</span>
                </a>
            </li>
            <li>
                <a href="https://pawelwiejkut.dev/sac-tutorial/" title="SAC">
                    <span>SAC</span>
                </a>
            </li>
            <li>
                <a href="https://pawelwiejkut.dev/abap-od-podstaw/" title="ABAP od postaw 🇵🇱 ">
                    <span>ABAP od postaw 🇵🇱 </span>
                </a>
            </li>
            <li>
                <a href="https://pawelwiejkut.dev/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://pawelwiejkut.dev/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Ballog czyli logowanie danych w ABAPie
    </h1>
    <div class="post-meta"><span title='2019-04-14 17:01:40 +0100 +0100'>April 14, 2019</span>&nbsp;·&nbsp;4 min&nbsp;|&nbsp;<a href="https://github.com/pawelwiejkut/pawelwiejkut.dev/tree/main/content/posts/ballog-abap-logowanie.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> 
  <div class="post-content"><p>Każdy język programowania posiada możliwość zapisania informacji technicznej, czy też zdarzenia które może być pomocna później na przykład podczas sprawdzenia poprawności działania napisanego programu. W wielu językach czynność ta sprowadza się często do napisania jednej linijki kodu, np:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Oh, coś poszło nie tak!&#34;</span>);</span></span></code></pre></div>
<p>W ABAPie sytuacja jest trochę bardziej skomplikowana. Zacznijmy może od napisania prostego programu, który będzie opierać się na stworzonych przez nas wcześniej obiektach DDICowych. Żeby nauczyć się czegoś nowego polecam razem ze mną wykonać wszystko w eclipse, oczywiście równie dobrze każdy krok będzie działać też bezpośrednio w SAP GUI.</p>
<p>Uwaga, w tym artykule przedstawiam tylko jeden sposób na obsługę balloga. Nie omawiam tu również szczegółowo wiadomości które wyświetlamy na ekranie użytkownika.</p>
<p><mark>Jeżeli szukasz kompletnego kursu online abap od podstaw – zapraszam Cię do zapoznania się z ofertą: <a href="https://saponit.pl/kurs-abap/">https://saponit.pl/kurs-abap/</a></mark></p>
<h1 id="tworzymy-program">Tworzymy program<a hidden class="anchor" aria-hidden="true" href="#tworzymy-program">#</a></h1>
<ol>
<li>Odpalmy sobie eclipse, kliknijmy prawym przyciskiem na pakiecie $TMP w naszym projekcie i wybierzmy New-&gt;Other ABAP Repository Object</li>
</ol>
<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/1.png#center" width="70%"/> 
</figure>

<ol start="2">
<li>Wpisujemy „program” i wybieramy ABAP program</li>
</ol>
<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/2.png#center" width="50%"/> 
</figure>

<ol start="3">
<li>Wypełniamy konieczne pola</li>
</ol>
<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/3.png#center" width="50%"/> 
</figure>

<ol start="4">
<li>Programujemy sobie teraz raport który będzie umożliwiał wpisanie nam jednego rekordu do naszej tabelki:</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-abap" data-lang="abap"><span style="display:flex;"><span><span style="color:#66d9ef">REPORT</span> zemp_add.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">PARAMETERS</span>:
</span></span><span style="display:flex;"><span>  pa_id  <span style="color:#66d9ef">TYPE </span>char3,
</span></span><span style="display:flex;"><span>  pa_nam <span style="color:#66d9ef">TYPE </span>zemp_name,
</span></span><span style="display:flex;"><span>  pa_lnm <span style="color:#66d9ef">TYPE </span>zemp_name.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">END-OF-SELECTION</span>.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">DATA</span>:
</span></span><span style="display:flex;"><span>  ls_employees <span style="color:#66d9ef">TYPE </span>zstr_employees.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  ls_employees<span style="color:#f92672">-</span>id <span style="color:#f92672">=</span> pa_id.
</span></span><span style="display:flex;"><span>  ls_employees<span style="color:#f92672">-</span>name <span style="color:#f92672">=</span> pa_nam.
</span></span><span style="display:flex;"><span>  ls_employees<span style="color:#f92672">-</span>last_name <span style="color:#f92672">=</span> pa_lnm.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">insert</span> zemployees <span style="color:#66d9ef">from</span> ls_employees.
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">Write</span>: |<span style="color:#e6db74"> </span>{ pa_nam }<span style="color:#e6db74"> was successfully added into table</span>| .</span></span></code></pre></div>
<ol start="5">
<li>Uzupełnijmy sobie jeszcze text elementy, żeby nazwy naszych parametrów były wyświetlane poprawnie, w tym celu kliknijmy prawym przyciskiem i wbierzmy Open Others-&gt; Text Elements</li>
</ol>
<p><figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/4.png#center" width="70%"/> 
</figure>

<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/5.png#center" width="70%"/> 
</figure>
</p>
<h1 id="debbugujemy">Debbugujemy<a hidden class="anchor" aria-hidden="true" href="#debbugujemy">#</a></h1>
<ol start="6">
<li>Zapisujemy,aktywujemy i uruchamiamy program z wybranymi parametrami np. poprzez F8</li>
</ol>
<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/6.png#center" width="70%"/> 
</figure>

<ol start="7">
<li>Sprawdźmy teraz zawartość naszej tabeli, żeby tego dokonać, musimy rozwinąć naszą paczkę $TMP, i poszukać tabeli w katalogu „Database Tables”. Następnie klikamy na tabeli prawym przyciskiem myszy i wybieramy „Open With”-&gt;”Data Preview”.</li>
</ol>
<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/7.png#center" width="70%"/> 
</figure>

<ol start="8">
<li>Finalnie w tabeli powinien pojawić się nowy rekord</li>
</ol>
<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/8.png#center" width="70%"/> 
</figure>

<ol start="9">
<li>Niestety jeżeli jeszcze raz uruchomimy program z tymi samymi parametrami to znów dostaniemy komunikat o poprawnym wprowadzeniu rekordu mimo tego że nic się nie zmieni i w tabeli będziemy mieć wciąż tylko jeden rekord. Dlaczego tak się stało ? Ustawmy breake-point poprzez dwukrotne kliknięcie w pole obok ostatniej lini. Spowodowuje to wyświetlenie w tym miejscu niebieskiej kropki.</li>
</ol>
<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/9.png#center" width="70%"/> 
</figure>

<ol start="10">
<li>Teraz kiedy uruchomimy raport znów z tymi samymi parametrami co na początku zobaczymy że wartość sy-subrc jest równa 4, ale co to właściwie oznacza ?</li>
</ol>
<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/10.png#center" width="70%"/> 
</figure>

<ol start="11">
<li>Wartość sy-subrc jest aktualizowana każdorazowo po wykonaniu niektórych instrukcji w ABAPie . Aby sprawdzić co oznacza sy-subrc 4 w przypadku insert, pozwólmy zakończyć się programowi poprzez naciśnięcie F8 i wróćmy do perspektywy abapowej naszego raportu.</li>
</ol>
<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/11.png#center" width="70%"/> 
</figure>

<ol start="12">
<li>Najedźmy teraz kursorem na insert i kliknijmy F1, następnie wybierzmy INSERT dbtab</li>
</ol>
<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/12.png#center" width="70%"/> 
</figure>

<ol start="13">
<li>Po zescrolowniu na dół zobaczymy informacje o sy-subrc mówiącą że nasz wiersz nie jest unikatowy, ale jak to możliwe ? Po porostu nasza tabela którą stworzyliśmy w DDICu podczas ostatniej lekcji ma w kluczu jedno pole: ID i ta wartość musi być unikatowa. Oczywiście po niepoprawnym sy-subrc możemy jedynie wyświetlić użytkownikowi informacje że taki wpis już istnieje, jednak nam zależy również na zalogowaniu tej informacji gdzieś na stałe.</li>
</ol>
<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/13a.png#center" width="50%"/> 
</figure>

<h1 id="tworzymy-obiekt-ballogowy">Tworzymy obiekt ballogowy<a hidden class="anchor" aria-hidden="true" href="#tworzymy-obiekt-ballogowy">#</a></h1>
<ol start="14">
<li>Przejdżmy zatem do transakcji slg0 i kliknijmy na „New Entries”</li>
</ol>
<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/13.png#center" width="70%"/> 
</figure>

<ol start="15">
<li>Wypełniamy nazwę obiektu</li>
</ol>
<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/14.png#center" width="70%"/> 
</figure>

<ol start="16">
<li>Zapisujemy i dodajemy nasz wpis do transportu</li>
</ol>
<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/15.png#center" width="70%"/> 
</figure>

<ol start="17">
<li>Zaznaczamy stworzony obiekt i klikamy na Sub-objects</li>
</ol>
<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/16.png#center" width="70%"/> 
</figure>

<ol start="18">
<li>Klikamy znowu na „New Entries”</li>
</ol>
<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/17.png#center" width="70%"/> 
</figure>

<ol start="19">
<li>Wypełniamy sub-obiekt i zapisujemy</li>
</ol>
<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/18.png#center" width="70%"/> 
</figure>

<h1 id="używamy-balloga-w-raporcie">Używamy balloga w raporcie<a hidden class="anchor" aria-hidden="true" href="#używamy-balloga-w-raporcie">#</a></h1>
<ol start="20">
<li>Zmieńmy teraz nasz program tak aby wyglądał następująco</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-abap" data-lang="abap"><span style="display:flex;"><span><span style="color:#66d9ef">REPORT</span> zemp_add.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">PARAMETERS</span>:
</span></span><span style="display:flex;"><span>  pa_id  <span style="color:#66d9ef">TYPE </span>char3,
</span></span><span style="display:flex;"><span>  pa_nam <span style="color:#66d9ef">TYPE </span>zemp_name,
</span></span><span style="display:flex;"><span>  pa_lnm <span style="color:#66d9ef">TYPE </span>zemp_name.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">END-OF-SELECTION</span>.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">DATA</span>:
</span></span><span style="display:flex;"><span>  ls_employees <span style="color:#66d9ef">TYPE </span>zstr_employees.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  ls_employees<span style="color:#f92672">-</span>id <span style="color:#f92672">=</span> pa_id.
</span></span><span style="display:flex;"><span>  ls_employees<span style="color:#f92672">-</span>name <span style="color:#f92672">=</span> pa_nam.
</span></span><span style="display:flex;"><span>  ls_employees<span style="color:#f92672">-</span>last_name <span style="color:#f92672">=</span> pa_lnm.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">INSERT</span> zemployees <span style="color:#66d9ef">FROM</span> ls_employees.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">IF</span> sy<span style="color:#f92672">-</span>subrc <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>.
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">MESSAGE</span> |{ pa_nam }<span style="color:#e6db74"> was successfully added into table</span>| TYPE <span style="color:#e6db74">&#39;S&#39;</span>.
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">ELSEIF</span> sy<span style="color:#f92672">-</span>subrc <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">DATA</span>: ls_header  <span style="color:#66d9ef">TYPE </span>bal_s_log,
</span></span><span style="display:flex;"><span>          lt_handler <span style="color:#66d9ef">TYPE </span>bal_t_logh,
</span></span><span style="display:flex;"><span>          lv_handle  <span style="color:#66d9ef">TYPE </span>balloghndl,
</span></span><span style="display:flex;"><span>          lv_text    <span style="color:#66d9ef">TYPE </span>c <span style="color:#66d9ef">LENGTH</span> <span style="color:#ae81ff">50</span>.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    ls_header<span style="color:#f92672">-</span>object    <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;ZB_EMP&#39;</span>.
</span></span><span style="display:flex;"><span>    ls_header<span style="color:#f92672">-</span>subobject <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;ZB_EMP_ADD&#39;</span>.
</span></span><span style="display:flex;"><span>    ls_header<span style="color:#f92672">-</span>extnumber <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Employees insert report log&#39;</span>.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&#34;tworzymy obiekt ballogowy
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">CALL FUNCTION</span> <span style="color:#e6db74">&#39;BAL_LOG_CREATE&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">EXPORTING</span>
</span></span><span style="display:flex;"><span>        i_s_log      <span style="color:#f92672">=</span> ls_header
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">IMPORTING</span>
</span></span><span style="display:flex;"><span>        e_log_handle <span style="color:#f92672">=</span> lv_handle.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&#34;dodajemy wiadomość o niepowodzeniu naszego programu
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    lv_text <span style="color:#f92672">=</span> |<span style="color:#e6db74">Entry with key </span>{ pa_id }<span style="color:#e6db74"> already exists</span>|.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">CALL FUNCTION</span> <span style="color:#e6db74">&#39;BAL_LOG_MSG_ADD_FREE_TEXT&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">EXPORTING</span>
</span></span><span style="display:flex;"><span>        i_log_handle <span style="color:#f92672">=</span> lv_handle
</span></span><span style="display:flex;"><span>        i_msgty      <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;E&#39;</span>
</span></span><span style="display:flex;"><span>        i_text       <span style="color:#f92672">=</span> lv_text.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">APPEND</span> lv_handle <span style="color:#66d9ef">TO</span> lt_handler.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&#34;zapisujemy informacje o niepowodzeniu w ballogu
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">CALL FUNCTION</span> <span style="color:#e6db74">&#39;BAL_DB_SAVE&#39;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">EXPORTING</span>
</span></span><span style="display:flex;"><span>        i_t_log_handle <span style="color:#f92672">=</span> lt_handler.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">MESSAGE</span>: lv_text TYPE <span style="color:#e6db74">&#39;E&#39;</span>.
</span></span><span style="display:flex;"><span> 
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">ENDIF</span>.</span></span></code></pre></div>
<ol start="22">
<li>Uruchamiamy nasz program znów z poprzednimi wartościami. Tym razem powinnismy dostać message z informacją o błędzie</li>
</ol>
<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/19a.png#center" width="70%"/> 
</figure>

<ol start="23">
<li>Przejdźmy teraz do transakcji slg1 i wypełnijmy nazwę naszego obiektu. Warto też zwrócić uwagę na przedział czasowy w jakim wyświetlają się nasze logi, czasami jeżeli nie wyłączamy całkowicie naszej wirtualnej maszyny to data i godzina mogą się różnić od tych ustawionych na naszym systemie. Po wprowadzeniu wartości uruchamiamy program.</li>
</ol>
<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/19.png#center" width="70%"/> 
</figure>

<ol start="24">
<li>Finalnie powinniśmy zobaczyć jeden błąd w górnej części programu i po kliknięciu na niego pojawią się nam szczegóły. Od teraz nasze błędne wprowadzenia są już logowane i można do nich wrócić.</li>
</ol>
<figure class="align-center ">
    <img loading="lazy" src="/ballog_abap_logowanie/20.png#center" width="70%"/> 
</figure>

<p>To już wszystko w tym artykule poświęconym ballogowi. Od teraz znasz już podstawowy sposób na zalogowanie informacji.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://pawelwiejkut.dev/tags/abap/">ABAP</a></li>
      <li><a href="https://pawelwiejkut.dev/tags/abap-od-podstaw/">ABAP od podstaw</a></li>
    </ul>
  </footer>
<link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">
<div id="mc_embed_signup">
<form action="https://pawelwiejkut.us19.list-manage.com/subscribe/post?u=ead4e0dc04f1f8c07403a39ac&amp;id=500c9c1881" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
	<label for="mce-EMAIL">Subscribe for newsletter:</label>
	<input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
    
    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_ead4e0dc04f1f8c07403a39ac_500c9c1881" tabindex="-1" value=""></div>
    <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
</form>
</div>



<script src="https://utteranc.es/client.js"
        repo="pawelwiejkut/pawelwiejkut.dev"
        issue-term="pathname"
        label="comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://pawelwiejkut.dev/">Pawel Wiejkut</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js" integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
const images = Array.from(document.querySelectorAll(".post-content img"));
images.forEach(img => {
  mediumZoom(img, {
    margin: 0,  
    scrollOffset: 40,  
    container: null,  
    template: null  
  });
});
</script>


<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
